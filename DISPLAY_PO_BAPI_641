REPORT zdisplay_po_bapi_641.

PARAMETERS : lv_po TYPE ekko-ebeln.        " Your PO number from the image
*DATA: lv_po_number TYPE ekko-ebeln VALUE '0001001626',         " Your PO number from the image

DATA : lt_items  TYPE TABLE OF bapiekpo,

       ls_item   TYPE bapiekpo,

       lt_return TYPE TABLE OF bapiret2,

       ls_return TYPE bapiret2.

CALL FUNCTION 'BAPI_PO_GETDETAIL'
  EXPORTING
    purchaseorder = lv_po
    items         = 'X'
  TABLES
    po_items      = lt_items
    return        = lt_return.

" Print PO Item Details
CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
 EXPORTING

   I_CALLBACK_PROGRAM                = sy-repid

   I_STRUCTURE_NAME                  = 'BAPIEKPO'

  TABLES
    t_outtab                          =  lt_items
 EXCEPTIONS
   PROGRAM_ERROR                     = 1
   OTHERS                            = 2
          .
IF sy-subrc <> 0.
RETURN.
ENDIF.

*WRITE: / 'Item', 'PO Number', 'Material', 'Plant', 'StLoc', 'Matl Group', 'Info Rec.'.
*
*LOOP AT lt_items INTO ls_item.
*
*  WRITE: / ls_item-po_item,         " Item
*
*           lv_po_number,            " PO Number
*
*           ls_item-material,        " Material Number
*
*           ls_item-plant,           " Plant
*
*           ls_item-store_loc,        " Storage Location
*
*           ls_item-mat_grp,      " Matl Group
*
*           ls_item-info_rec.        " Info Record
*
*ENDLOOP.

" Print BAPI messages

LOOP AT lt_return INTO ls_return.

  WRITE: / ls_return-message.

ENDLOOP.








*  REPORT zdisplay_po_bapi_641.
*
*
*PARAMETERS p_ebeln TYPE bapiekko-po_number OBLIGATORY.
**  DATA po_header TYPE  bapiekkol.
*DATA po_header TYPE TABLE OF bapimepoheader.
*DATA: gr_alv       TYPE REF TO cl_salv_table.
*
*CALL FUNCTION 'BAPI_PO_GETDETAIL'
*  EXPORTING
*    purchaseorder = p_ebeln
*   ITEMS         = 'X'
**   ACCOUNT_ASSIGNMENT               = ' '
**   SCHEDULES     = ' '
**   HISTORY       = ' '
**   ITEM_TEXTS    = ' '
**   HEADER_TEXTS  = ' '
**   SERVICES      = ' '
**   CONFIRMATIONS = ' '
**   SERVICE_TEXTS = ' '
**   EXTENSIONS    = ' '
**  IMPORTING
**    po_header     = po_header
**   PO_ADDRESS    =
** TABLES
**   PO_HEADER_TEXTS                  =
**   PO_ITEMS      =
**   PO_ITEM_ACCOUNT_ASSIGNMENT       =
**   PO_ITEM_SCHEDULES                =
**   PO_ITEM_CONFIRMATIONS            =
**   PO_ITEM_TEXTS =
**   PO_ITEM_HISTORY                  =
**   PO_ITEM_HISTORY_TOTALS           =
**   PO_ITEM_LIMITS                   =
**   PO_ITEM_CONTRACT_LIMITS          =
**   PO_ITEM_SERVICES                 =
**   PO_ITEM_SRV_ACCASS_VALUES        =
**   RETURN        =
**   PO_SERVICES_TEXTS                =
**   EXTENSIONOUT  =
**   NFMETALLITMS  =
*  .
*
*
*
*
*CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
*  EXPORTING
**   I_INTERFACE_CHECK  = ' '
**   I_BYPASSING_BUFFER = ' '
**   I_BUFFER_ACTIVE    = ' '
*    i_callback_program = sy-repid
**   I_CALLBACK_PF_STATUS_SET          = ' '
**   I_CALLBACK_USER_COMMAND           = ' '
**   I_CALLBACK_TOP_OF_PAGE            = ' '
**   I_CALLBACK_HTML_TOP_OF_PAGE       = ' '
**   I_CALLBACK_HTML_END_OF_LIST       = ' '
*    i_structure_name   = 'BAPIMEPOHEADER'
**   I_BACKGROUND_ID    = ' '
**   I_GRID_TITLE       =
**   I_GRID_SETTINGS    =
**   IS_LAYOUT          =
**   IT_FIELDCAT        =
**   IT_EXCLUDING       =
**   IT_SPECIAL_GROUPS  =
**   IT_SORT            =
**   IT_FILTER          =
**   IS_SEL_HIDE        =
**   I_DEFAULT          = 'X'
**   I_SAVE             = ' '
**   IS_VARIANT         =
**   IT_EVENTS          =
**   IT_EVENT_EXIT      =
**   IS_PRINT           =
**   IS_REPREP_ID       =
**   I_SCREEN_START_COLUMN             = 0
**   I_SCREEN_START_LINE               = 0
**   I_SCREEN_END_COLUMN               = 0
**   I_SCREEN_END_LINE  = 0
**   I_HTML_HEIGHT_TOP  = 0
**   I_HTML_HEIGHT_END  = 0
**   IT_ALV_GRAPHICS    =
**   IT_HYPERLINK       =
**   IT_ADD_FIELDCAT    =
**   IT_EXCEPT_QINFO    =
**   IR_SALV_FULLSCREEN_ADAPTER        =
**   O_PREVIOUS_SRAL_HANDLER           =
**   O_COMMON_HUB       =
** IMPORTING
**   E_EXIT_CAUSED_BY_CALLER           =
**   ES_EXIT_CAUSED_BY_USER            =
*  TABLES
*    t_outtab           = po_header
** EXCEPTIONS
**   PROGRAM_ERROR      = 1
**   OTHERS             = 2
*  .
*IF sy-subrc <> 0.
** Implement suitable error handling here
*ENDIF.





*
*
*  LOOP AT po_header INTO DATA(wa_header).
*    WRITE : wa_header-po_number,wa_header-co_code,wa_header-vendor.
*  ENDLOOP.
*
*  TRY.
*      CALL METHOD cl_salv_table=>factory
**  EXPORTING
**    list_display   = IF_SALV_C_BOOL_SAP=>FALSE
**    r_container    =
**    container_name =
*        IMPORTING
*          r_salv_table = gr_alv
*        CHANGING
*          t_table      = po_header.
*    CATCH cx_salv_msg.
*  ENDTRY.



*-----------------------===============================-----------
*DATA:
*  po_header   TYPE bapimepoheader,
*  po_items    TYPE TABLE OF bapimepoitem,
*  return_tab  TYPE TABLE OF bapiret2,
*  return_line TYPE bapiret2.
*
*DATA: gr_alv       TYPE REF TO cl_salv_table.
*
*START-OF-SELECTION.
*
*  CALL FUNCTION 'BAPI_PO_GETDETAIL'
*    EXPORTING
*      purchaseorder = p_ebeln
*      items         = 'X'
*    IMPORTING
*      po_header     = po_header
*    TABLES
*      po_items      = po_items
*      return        = return_tab.
*
*  LOOP AT return_tab INTO return_line.
*    IF return_line-type = 'E' OR return_line-type = 'A'.
*      MESSAGE return_line-message TYPE 'E'.
*    ENDIF.
*  ENDLOOP.
*
*  WRITE: / 'Purchase Order:', po_header-po_number,
*          'Document Date:', po_header-doc_date,
*          'Vendor:', po_header-vendor.
*
*  TRY.
*      cl_salv_table=>factory(
*        IMPORTING
*          r_salv_table = gr_alv
*        CHANGING
*          t_table      = po_items ).
*
*      gr_alv->display( ).
*    CATCH cx_salv_msg INTO DATA(lx_msg).
*      MESSAGE lx_msg->get_text( ) TYPE 'E'.
*  ENDTRY.
